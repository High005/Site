<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-09-08">

<title>High005 - Easies way to show your statistical output to everybody</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">High005</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../tutorials.html"> 
<span class="menu-text">Discover</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../jobs.html"> 
<span class="menu-text">Click to solve together</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../tech.html"> 
<span class="menu-text">Fresh tech</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../science.html"> 
<span class="menu-text">Analytics tips</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Easies way to show your statistical output to everybody</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 8, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="from-raw-output-to-professional-tables-transforming-statistical-results-with-gtsummary" class="level1">
<h1>From Raw Output to Professional Tables: Transforming Statistical Results with gtsummary</h1>
<p>In this article you’ll see the way to communicate to your stakeholders the way to present the results in a clear, accessible format. The <code>gtsummary</code> package transform complex statistical output into publication-ready tables that speak to any audience.</p>
<section id="the-problem-with-raw-statistical-output" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-with-raw-statistical-output">The Problem with Raw Statistical Output</h2>
<p>Traditional R output, usually, presents several challenges when communicating with broader audiences:</p>
<section id="issues-with-base-r-output" class="level3">
<h3 class="anchored" data-anchor-id="issues-with-base-r-output">Issues with Base R Output:</h3>
<ul>
<li><strong>Information overload</strong>: Raw output includes MANY technical details (residuals, diagnostic statistics, model fit information) that can overwhelm your stakeholders</li>
<li><strong>Poor formatting</strong>: Console output lacks visual hierarchy and professional appearance</li>
<li><strong>Technical jargon</strong>: Terms like “Std. Error,” “t value,” and “Pr(&gt;|t|)” require statistical background to interpret</li>
<li><strong>Inconsistent presentation</strong>: Different model types produce different output formats, making comparisons difficult</li>
</ul>
</section>
<section id="real-world-scenario" class="level3">
<h3 class="anchored" data-anchor-id="real-world-scenario">Real-World Scenario:</h3>
<p>Imagine presenting regression results from a clinical trial to a medical advisory board. Raw R output might show:</p>
<pre><code>Coefficients:
                    Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)         45.2341     2.1234   21.29  &lt; 2e-16 ***
treatment_group      8.7654     1.5678    5.59  8.9e-07 ***
age                  0.2345     0.0876    2.68   0.0089 ** 
gender_female       -2.1098     1.2345   -1.71   0.0912 .  </code></pre>
<p>While statisticians can quickly interpret this, clinicians need to know: “What does this mean for patient outcomes?”</p>
</section>
</section>
<section id="what-is-gtsummary" class="level2">
<h2 class="anchored" data-anchor-id="what-is-gtsummary">What is gtsummary?</h2>
<p><strong>gtsummary is an R package that creates elegant, publication-ready summary tables from statistical models.</strong> It automatically formats results, adds appropriate labels, and presents findings in a way that’s immediately interpretable by diverse audiences.</p>
<section id="core-philosophy" class="level3">
<h3 class="anchored" data-anchor-id="core-philosophy">Core Philosophy:</h3>
<ul>
<li><strong>Clarity over complexity</strong>: Present only the most relevant information</li>
<li><strong>Audience-appropriate</strong>: Adapt technical results for non-technical stakeholders</li>
<li><strong>Professional appearance</strong>: Generate tables ready for publications, presentations, and reports</li>
<li><strong>Consistency</strong>: Standardize output across different types of analyses</li>
</ul>
</section>
</section>
<section id="key-functions-and-applications" class="level2">
<h2 class="anchored" data-anchor-id="key-functions-and-applications">Key Functions and Applications</h2>
<section id="tbl_regression-the-workhorse-function" class="level3">
<h3 class="anchored" data-anchor-id="tbl_regression-the-workhorse-function">1. tbl_regression(): The Workhorse Function</h3>
<p>The <code>tbl_regression()</code> function transforms raw regression output into clean, interpretable tables.</p>
<p><strong>Key features:</strong> - Automatic formatting of coefficients and confidence intervals - Clear variable labeling - Optional p-values with appropriate formatting - Customizable precision and display options</p>
<p><strong>Example transformation:</strong> Instead of raw coefficient output, you get a table showing: - <strong>Variable</strong>: Treatment Group - <strong>Coefficient</strong>: 8.77 (95% CI: 5.70, 11.84) - <strong>p-value</strong>: &lt;0.001</p>
</section>
<section id="tbl_summary-descriptive-statistics-made-simple" class="level3">
<h3 class="anchored" data-anchor-id="tbl_summary-descriptive-statistics-made-simple">2. tbl_summary(): Descriptive Statistics Made Simple</h3>
<p>Creates comprehensive descriptive statistics tables that are immediately publication-ready.</p>
<p><strong>Applications:</strong> - <strong>Baseline characteristics</strong>: Compare treatment groups in clinical trials - <strong>Population descriptions</strong>: Summarize study participant characteristics - <strong>Stratified analyses</strong>: Show results by subgroups</p>
</section>
<section id="tbl_survfit-survival-analysis-results" class="level3">
<h3 class="anchored" data-anchor-id="tbl_survfit-survival-analysis-results">3. tbl_survfit(): Survival Analysis Results</h3>
<p>Transforms complex survival analysis output into clear, interpretable tables showing: - Median survival times with confidence intervals - Survival probabilities at key time points - Hazard ratios with clear interpretation</p>
</section>
</section>
<section id="model-versatility-beyond-linear-regression" class="level2">
<h2 class="anchored" data-anchor-id="model-versatility-beyond-linear-regression">Model Versatility: Beyond Linear Regression</h2>
<section id="supported-model-types" class="level3">
<h3 class="anchored" data-anchor-id="supported-model-types">Supported Model Types:</h3>
<p><strong>Linear Models:</strong> - Simple and multiple linear regression - Analysis of variance (ANOVA) - Analysis of covariance (ANCOVA)</p>
<p><strong>Generalized Linear Models:</strong> - Logistic regression (odds ratios automatically calculated) - Poisson regression (incidence rate ratios) - Negative binomial regression</p>
<p><strong>Advanced Models:</strong> - Cox proportional hazards models - Mixed-effects models (with appropriate packages) - Bayesian models (with brms integration)</p>
<p><strong>Specialized Applications:</strong> - Dose-response analyses - Propensity score matching results - Meta-analysis summaries</p>
</section>
<section id="example-logistic-regression-output" class="level3">
<h3 class="anchored" data-anchor-id="example-logistic-regression-output">Example: Logistic Regression Output</h3>
<p>Raw R output shows log-odds coefficients that are difficult to interpret:</p>
<pre><code>Coefficients:
                Estimate Std. Error z value Pr(&gt;|z|)
treatment       1.2345     0.3456    3.57   0.0004</code></pre>
<p>gtsummary automatically converts this to odds ratios: - <strong>Treatment</strong>: OR = 3.44 (95% CI: 1.75, 6.77), p &lt; 0.001</p>
<p>This immediately tells clinicians that treatment increases the odds of success by 244%.</p>
</section>
</section>
<section id="customization-for-different-audiences" class="level2">
<h2 class="anchored" data-anchor-id="customization-for-different-audiences">Customization for Different Audiences</h2>
<section id="for-clinical-audiences" class="level3">
<h3 class="anchored" data-anchor-id="for-clinical-audiences">For Clinical Audiences:</h3>
<ul>
<li><strong>Emphasize clinical significance</strong>: Include effect sizes and confidence intervals</li>
<li><strong>Plain language labels</strong>: Replace variable names with descriptive text</li>
<li><strong>Relevant precision</strong>: Show appropriate decimal places for clinical context</li>
</ul>
</section>
<section id="for-regulatory-submissions" class="level3">
<h3 class="anchored" data-anchor-id="for-regulatory-submissions">For Regulatory Submissions:</h3>
<ul>
<li><strong>Complete statistical information</strong>: Include all required statistics</li>
<li><strong>Standardized formatting</strong>: Follow regulatory guidelines for table presentation</li>
<li><strong>Footnote integration</strong>: Add necessary disclaimers and explanations</li>
</ul>
</section>
<section id="for-executive-presentations" class="level3">
<h3 class="anchored" data-anchor-id="for-executive-presentations">For Executive Presentations:</h3>
<ul>
<li><strong>Simplified display</strong>: Focus on key results only</li>
<li><strong>Visual emphasis</strong>: Highlight significant findings</li>
<li><strong>Context provision</strong>: Include baseline comparisons</li>
</ul>
</section>
</section>
<section id="advanced-features" class="level2">
<h2 class="anchored" data-anchor-id="advanced-features">Advanced Features</h2>
<section id="statistical-customization" class="level3">
<h3 class="anchored" data-anchor-id="statistical-customization">Statistical Customization:</h3>
<ul>
<li><strong>Confidence interval levels</strong>: Adjust from default 95% to other levels</li>
<li><strong>P-value formatting</strong>: Control decimal places and significance indicators</li>
<li><strong>Effect size measures</strong>: Include standardized coefficients or effect sizes</li>
</ul>
</section>
<section id="visual-enhancement" class="level3">
<h3 class="anchored" data-anchor-id="visual-enhancement">Visual Enhancement:</h3>
<ul>
<li><strong>Conditional formatting</strong>: Highlight significant results</li>
<li><strong>Custom themes</strong>: Match organizational branding</li>
<li><strong>Integration capabilities</strong>: Export to Word, HTML, or LaTeX</li>
</ul>
</section>
<section id="multi-table-integration" class="level3">
<h3 class="anchored" data-anchor-id="multi-table-integration">Multi-table Integration:</h3>
<ul>
<li><strong>Model comparison tables</strong>: Compare multiple models side-by-side</li>
<li><strong>Stratified analyses</strong>: Present results by subgroups</li>
<li><strong>Combined results</strong>: Merge different types of analyses</li>
</ul>
</section>
</section>
<section id="best-practices-for-implementation" class="level2">
<h2 class="anchored" data-anchor-id="best-practices-for-implementation">Best Practices for Implementation</h2>
<section id="know-your-audience" class="level3">
<h3 class="anchored" data-anchor-id="know-your-audience">1. Know Your Audience</h3>
<ul>
<li><strong>Statistical background</strong>: Adjust complexity accordingly</li>
<li><strong>Domain expertise</strong>: Use appropriate terminology</li>
<li><strong>Decision-making needs</strong>: Highlight actionable results</li>
</ul>
</section>
<section id="table-design-principles" class="level3">
<h3 class="anchored" data-anchor-id="table-design-principles">2. Table Design Principles</h3>
<ul>
<li><strong>Logical organization</strong>: Group related variables together</li>
<li><strong>Clear headers</strong>: Use descriptive column names</li>
<li><strong>Appropriate precision</strong>: Match decimal places to measurement precision</li>
<li><strong>Consistent formatting</strong>: Standardize across all tables</li>
</ul>
</section>
<section id="interpretation-support" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-support">3. Interpretation Support</h3>
<ul>
<li><strong>Footnotes</strong>: Explain statistical terms when necessary</li>
<li><strong>Reference categories</strong>: Clearly identify comparison groups</li>
<li><strong>Clinical context</strong>: Include baseline values or normal ranges</li>
</ul>
</section>
</section>
<section id="common-implementation-challenges" class="level2">
<h2 class="anchored" data-anchor-id="common-implementation-challenges">Common Implementation Challenges</h2>
<section id="challenge-1-variable-labeling" class="level3">
<h3 class="anchored" data-anchor-id="challenge-1-variable-labeling">Challenge 1: Variable Labeling</h3>
<p><strong>Problem</strong>: R variable names (e.g., <code>trt_grp</code>, <code>age_yrs</code>) aren’t presentation-ready <strong>Solution</strong>: Use descriptive labels (“Treatment Group”, “Age (years)”)</p>
</section>
<section id="challenge-2-multiple-model-comparisons" class="level3">
<h3 class="anchored" data-anchor-id="challenge-2-multiple-model-comparisons">Challenge 2: Multiple Model Comparisons</h3>
<p><strong>Problem</strong>: Comparing results across different model types <strong>Solution</strong>: Standardize presentation format across all models</p>
</section>
<section id="challenge-3-complex-interactions" class="level3">
<h3 class="anchored" data-anchor-id="challenge-3-complex-interactions">Challenge 3: Complex Interactions</h3>
<p><strong>Problem</strong>: Interaction terms are difficult to present clearly <strong>Solution</strong>: Consider stratified analyses or graphical presentations alongside tables</p>
</section>
</section>
<section id="integration-with-reproducible-research" class="level2">
<h2 class="anchored" data-anchor-id="integration-with-reproducible-research">Integration with Reproducible Research</h2>
<section id="benefits-for-research-workflow" class="level3">
<h3 class="anchored" data-anchor-id="benefits-for-research-workflow">Benefits for Research Workflow:</h3>
<ul>
<li><strong>Reproducibility</strong>: Tables update automatically when data changes</li>
<li><strong>Version control</strong>: Track changes in presentation over time</li>
<li><strong>Collaboration</strong>: Standardized output facilitates team communication</li>
<li><strong>Quality control</strong>: Reduces manual formatting errors</li>
</ul>
</section>
<section id="documentation-advantages" class="level3">
<h3 class="anchored" data-anchor-id="documentation-advantages">Documentation Advantages:</h3>
<ul>
<li><strong>Audit trail</strong>: Clear connection between analysis code and presentation</li>
<li><strong>Transparency</strong>: Analysis decisions are explicit in code</li>
<li><strong>Efficiency</strong>: Automated formatting saves time and reduces errors</li>
</ul>
</section>
</section>
<section id="impact-on-statistical-communication" class="level2">
<h2 class="anchored" data-anchor-id="impact-on-statistical-communication">Impact on Statistical Communication</h2>
<section id="for-researchers" class="level3">
<h3 class="anchored" data-anchor-id="for-researchers">For Researchers:</h3>
<ul>
<li><strong>Increased impact</strong>: Clear presentations lead to better understanding</li>
<li><strong>Time savings</strong>: Automated formatting reduces manual work</li>
<li><strong>Professional appearance</strong>: Publication-ready output enhances credibility</li>
</ul>
</section>
<section id="for-decision-makers" class="level3">
<h3 class="anchored" data-anchor-id="for-decision-makers">For Decision Makers:</h3>
<ul>
<li><strong>Better understanding</strong>: Clear tables facilitate informed decisions</li>
<li><strong>Faster review</strong>: Well-organized results speed up evaluation process</li>
<li><strong>Reduced miscommunication</strong>: Standardized presentation prevents misinterpretation</li>
</ul>
</section>
<section id="for-the-field" class="level3">
<h3 class="anchored" data-anchor-id="for-the-field">For the Field:</h3>
<ul>
<li><strong>Improved standards</strong>: Elevates expectations for result presentation</li>
<li><strong>Better science communication</strong>: Bridges gap between analysis and application</li>
<li><strong>Enhanced reproducibility</strong>: Standardized approaches improve consistency</li>
</ul>
</section>
</section>
<section id="future-considerations" class="level2">
<h2 class="anchored" data-anchor-id="future-considerations">Future Considerations</h2>
<section id="new-trends" class="level3">
<h3 class="anchored" data-anchor-id="new-trends">New Trends:</h3>
<ul>
<li><strong>Interactive tables</strong>: Integration with web-based presentation tools</li>
<li><strong>Automated interpretation</strong>: AI-assisted result explanation</li>
<li><strong>Personalized presentation</strong>: Audience-specific automatic formatting</li>
</ul>
</section>
</section>
<section id="key-takeaway" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaway">Key Takeaway</h2>
<p>The transition from raw statistical output to professional presentation isn’t just about aesthetics—it’s about effective scientific communication. Tools like <code>gtsummary</code> transform complex analyses into accessible insights, ensuring that statistical findings can inform decision-making at all levels.</p>
<p>In an era where evidence-based decision making is crucial, the ability to communicate statistical results clearly and professionally has become as important as the analysis itself. By investing in proper presentation tools and techniques, researchers can maximize the impact of their work and ensure that valuable insights reach and influence their intended audiences.</p>
<p><strong>Remember</strong>: Great statistics poorly communicated are far less valuable than good statistics clearly presented. The goal is not just to analyze data, but to transform that analysis into actionable knowledge.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>